<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />




<title>Exploratory Data Analysis</title>

<script src="site_libs/header-attrs-2.24/header-attrs.js"></script>
<script src="site_libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/simplex.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<style>h1 {font-size: 34px;}
       h1.title {font-size: 38px;}
       h2 {font-size: 30px;}
       h3 {font-size: 24px;}
       h4 {font-size: 18px;}
       h5 {font-size: 16px;}
       h6 {font-size: 12px;}
       code {color: inherit; background-color: rgba(0, 0, 0, 0.04);}
       pre:not([class]) { background-color: white }</style>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>
<link href="site_libs/font-awesome-6.4.2/css/all.min.css" rel="stylesheet" />
<link href="site_libs/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet" />

<style type="text/css">
  code{white-space: pre-wrap;}
  span.smallcaps{font-variant: small-caps;}
  span.underline{text-decoration: underline;}
  div.column{display: inline-block; vertical-align: top; width: 50%;}
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  ul.task-list{list-style: none;}
    </style>

<style type="text/css">code{white-space: pre;}</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>









<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
details > summary > p:only-child {
  display: inline;
}
pre code {
  padding: 0;
}
</style>


<style type="text/css">
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #adb5bd;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script type="text/javascript">
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark the anchor link active (and if it's in a dropdown, also mark that active)
  var dropdown = menuAnchor.closest('li.dropdown');
  if (window.bootstrap) { // Bootstrap 4+
    menuAnchor.addClass('active');
    dropdown.find('> .dropdown-toggle').addClass('active');
  } else { // Bootstrap 3
    menuAnchor.parent().addClass('active');
    dropdown.addClass('active');
  }

  // Navbar adjustments
  var navHeight = $(".navbar").first().height() + 15;
  var style = document.createElement('style');
  var pt = "padding-top: " + navHeight + "px; ";
  var mt = "margin-top: -" + navHeight + "px; ";
  var css = "";
  // offset scroll position for anchor links (for fixed navbar)
  for (var i = 1; i <= 6; i++) {
    css += ".section h" + i + "{ " + pt + mt + "}\n";
  }
  style.innerHTML = "body {" + pt + "padding-bottom: 40px; }\n" + css;
  document.head.appendChild(style);
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before, .tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "\e259";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "\e258";
  font-family: 'Glyphicons Halflings';
  border: none;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
  background-color: transparent;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-bs-toggle="collapse" data-target="#navbar" data-bs-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Introduction</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="eda.html">Exploratory Data Analysis</a>
</li>
<li>
  <a href="sda.html">Statistical Data Analysis</a>
</li>
<li>
  <a href="final_report.html">Final Report</a>
</li>
<li>
  <a href="about.html">About us</a>
</li>
<li>
  <a href="mailto:&lt;lvr2115@cumc.columbia.edu&gt;">
    <span class="fa fa-envelope fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="https://github.com/yyNYFL/Final-Project">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div id="header">

<div class="btn-group pull-right float-right">
<button type="button" class="btn btn-default btn-xs btn-secondary btn-sm dropdown-toggle" data-toggle="dropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu dropdown-menu-right" style="min-width: 50px;">
<li><a id="rmd-show-all-code" href="#">Show All Code</a></li>
<li><a id="rmd-hide-all-code" href="#">Hide All Code</a></li>
</ul>
</div>



<h1 class="title toc-ignore">Exploratory Data Analysis</h1>

</div>


<pre class="r"><code>rat_sightings = 
  read_csv (&quot;./data/Rat_Sightings.csv&quot;) |&gt;
  janitor::clean_names(case = &quot;snake&quot;) |&gt;
  separate(created_date, sep=&quot;/&quot;, into = c(&quot;month&quot;, &quot;day&quot;, &quot;year&quot;)) |&gt; 
  separate(year, sep=&quot; &quot;, into = c(&quot;year&quot;)) |&gt;
  filter(borough != &quot;STATEN ISLAND&quot;) |&gt; 
  filter(year %in% c(&quot;2019&quot;, &quot;2020&quot;, &quot;2021&quot;, &quot;2022&quot;, &quot;2023&quot;)) |&gt;
  mutate(
    borough_id = recode(
      borough, 
      &quot;MANHATTAN&quot; = 1,
      &quot;BRONX&quot; =2,
      &quot;BROOKLYN&quot;=3,
      &quot;QUEENS&quot;= 4)) |&gt;
  mutate(
    month = as.numeric(month),
    year = as.numeric(year)
  ) |&gt;
  select(unique_key, month, day, year, location_type, incident_zip, borough, location, borough_id) |&gt;
  mutate(
    borough = str_to_sentence(borough)
  )</code></pre>
<div id="data-cleaning-and-tidying" class="section level3">
<h3>Data cleaning and tidying</h3>
<p>In order to analyze rat sightings, we used 2 data sources from NYC
Open Data: 311 Rat Sightings and Monthly tonnage data from the NYC
Department of Sanitation. The 311 Rat Sightings data was filtered to
exclude observations from Staten Island since there was significantly
less data from that borough. This decision aims to maintain consistency
and reliability in our analysis by focusing on areas with more robust
data. Since the data set contained data from more than 230,000 rat
sighting reports from 2010 until present-day, we filtered it to only
include data from 2019-2023. Only variables of interest to our analysis
were kept:</p>
<ul>
<li><code>unique_key</code>: A unique identifier for each rat sighting
report.</li>
<li><code>location_type</code>: The type of location where the rat
sighting was reported, providing context to the environment of these
sightings.</li>
<li><code>incident_zip</code>: The ZIP code of the reported sighting,
allowing for geographical analysis.</li>
<li><code>borough</code>: The borough where the sighting occurred,
crucial for comparing sightings across different areas of the city.</li>
<li><code>location</code>: Specific coordinates of the sighting,
offering detailed geographical information in regards to latitude and
longitude.</li>
</ul>
<p>Variable <code>created_date</code> was separated to create three new
variables to allow for analysis: <code>month</code>, <code>day</code>,
<code>year</code>.</p>
<p>Borough_id was serves as a numerical identifier for each borough,
which can be useful for data management, especially when dealing with
categorical data (like the boroughs) in statistical analyses or
visualizations.</p>
<pre class="r"><code>waste_tonnage = read_csv(&quot;data/DSNY_Monthly_Tonnage_Data_20231202.csv&quot;) %&gt;%
  clean_names(case = &quot;snake&quot;) %&gt;%
  mutate(date_split = strsplit(month, &quot;/&quot;)) %&gt;%
  mutate(
    year = as.integer(sapply(date_split, function(x) x[1])),
    month = as.integer(sapply(date_split, function(x) x[2]))
  ) %&gt;%
  filter(year %in% c(2022, 2023)) %&gt;% 
  mutate(total_organics = resorganicstons + schoolorganictons)

waste_tonnage = waste_tonnage %&gt;% 
  group_by(borough, month, year, borough_id) %&gt;% 
  summarise(
    total_organics = sum(total_organics, na.rm = TRUE),
    total_refuse = sum(refusetonscollected, na.rm = TRUE)
    )</code></pre>
</div>
<div id="waste-tonnage-data-cleaning" class="section level2">
<h2>Waste Tonnage Data Cleaning</h2>
<p>To tidy up the waste tonnage data, we started by importing the
Monthly Tonnage Data from the NYC Department of Sanitation. To make the
data more manageable and consistent, we first applied the clean_names
function.</p>
<p>Next, we focused on the date information. The month column initially
contained combined year and month data, so we split it into two separate
variables. We achieved this by using strsplit to separate the year and
month, and then applied the sapply function to extract and convert these
into individual year and month integer columns.</p>
<p>We decided to filter the dataset to include only the years 2022 and
2023. This filtering aligns our analysis with a more recent and relevant
timeframe and allows for a smaller subset of the initial dataset.</p>
<p>We then consolidated the data on organic waste, which was initially
spread across different columns (resorganicstons and schoolorganictons).
These represent residential organic tons and school organic tons. We
summed these columns to create a new <code>total_organics</code> column,
giving us a the total organic waste.</p>
<p>For our last step, we grouped the data by borough, month, year, and
borough_id. This grouping allowed us to summarize the total organic
waste and total refuse collected in each borough for each month and
year, ensuring our analysis would capture the geographical and temporal
variations in waste tonnage. We used summarise with na.rm = TRUE to
handle any missing values effectively, ensuring that they did not skew
our results.</p>
<p>Merging Datasets: We used the left_join function from the dplyr
package to we merge the rat_sightings data with the waste_tonnage data.
We chose to merge based on borough_id, month, year, and borough. This
approach ensures that each rat sighting record is aligned with the
corresponding waste tonnage data based on both geographical (borough)
and temporal (month and year) factors. After merging, we applied a
filtering step to remove rows with missing values (NA) in the
total_organics and total_refuse columns.</p>
<div id="figure-1-total-trash-by-borough-for-2022-and-2023"
class="section level3">
<h3>Figure 1: Total Trash by Borough for 2022 and 2023</h3>
<pre class="r"><code>waste_tonnage_by_borough = rat_waste_filtered |&gt; 
  group_by(borough) |&gt; 
  summarise(total_tonnage = sum(total_organics + total_refuse))

ggplot(waste_tonnage_by_borough, aes(x = reorder(borough, -total_tonnage), y = total_tonnage)) +
  geom_bar(stat = &quot;identity&quot;, fill = &quot;blue&quot;) +
  labs(x = &quot;Borough&quot;, y = &quot;Trash Tonnage&quot;, title = &quot;Trash Tonnage by Borough, 2022 - 2023&quot;) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
<p><img src="eda_files/figure-html/figure%201-1.png" width="672" /></p>
<p>Figure 1, titled “Trash Tonnage by Borough, 2022 - 2023,” is a bar
chart visualizing the total amount of trash (comprising both organics
and refuse) collected in each borough of New York City over the years
2022 and 2023. From the chart, it is evident that <em>Brooklyn</em> has
the highest total trash tonnage, shown by the tallest bar. The other
boroughs—Queens, Manhattan, and the Bronx—are represented with
progressively smaller bars, indicating a decrease in the total trash
tonnage respectively. Staten Island is not included in the chart, which
is consistent with the earlier note that data from Staten Island was
excluded from the analysis due to significantly less data being
available from that borough. The scientific notation on the y-axis was
used for a concise representation of large numbers, indicating the vast
scale of waste collected in across the boroughs.</p>
</div>
<div id="figure-2-total-refuse-and-total-organics"
class="section level3">
<h3>Figure 2: Total Refuse and Total organics</h3>
<pre class="r"><code>waste_by_borough_refuse &lt;- aggregate(total_refuse ~ borough, data=waste_tonnage, sum)

# barplot for total refuse
barplot(waste_by_borough_refuse$total_refuse,
        main=&quot;Total Refuse Production by Borough&quot;,
        xlab=&quot;Borough&quot;,
        ylab=&quot;Total Refuse (tons)&quot;,
        col=&quot;blue&quot;,
        names.arg=waste_by_borough_refuse$borough,
        las=2)</code></pre>
<p><img src="eda_files/figure-html/figure%202-1.png" width="672" /></p>
<pre class="r"><code>waste_by_borough_organics &lt;- aggregate(total_organics ~ borough, data=waste_tonnage, sum)

# barplot for total organics
barplot(waste_by_borough_organics$total_organics,
        main=&quot;Total Organics Production by Borough&quot;,
        xlab=&quot;Borough&quot;,
        ylab=&quot;Total Organics (tons)&quot;,
        col=&quot;green&quot;,
        names.arg=waste_by_borough_organics$borough,
        las=2)</code></pre>
<p><img src="eda_files/figure-html/figure%202-2.png" width="672" /></p>
<ul>
<li>Explain this figure, including why you had to separate (b/c they are
on a different scale)</li>
</ul>
</div>
</div>
<div id="figure-3-trash-by-borough-per-month" class="section level2">
<h2>Figure 3: Trash by Borough per month</h2>
<pre class="r"><code>total_tonnage_by_borough_year_month = rat_waste_filtered |&gt; 
  group_by(borough, year, month) |&gt; 
  summarise(total_tonnage = sum(total_organics + total_refuse))

total_tonnage_by_borough_year_month$year_month &lt;- as.Date(paste(total_tonnage_by_borough_year_month$year, total_tonnage_by_borough_year_month$month, &quot;01&quot;, sep = &quot;-&quot;))

ggplot(total_tonnage_by_borough_year_month, aes(x = year_month, y = total_tonnage, group = borough, color = borough)) +
  geom_line() +
  labs(x = &quot;Year-Month&quot;, y = &quot;Amount of Trash (in tons)&quot;, title = &quot;Trash Tonnage by Month and Borough&quot;) +
  scale_x_date(date_labels = &quot;%Y-%m&quot;, date_breaks = &quot;1 month&quot;) +
  scale_y_continuous(labels = scales::number_format(scale = 1e-6)) +
  theme_minimal() +
  theme(axis.text.x = element_text(angle = 45, hjust = 1))</code></pre>
<p><img src="eda_files/figure-html/figure%203-1.png" width="672" /></p>
<ul>
<li>Explain this figure,</li>
</ul>
</div>




</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.odd').parent('tbody').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open');
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeCodeFolding("show" === "show");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
